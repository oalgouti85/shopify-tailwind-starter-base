{% comment %}
This file is auto-generated by Foxify.
This file can be re-written at any time. Please do not update this file directly.
{% endcomment %}
{% liquid
    assign SHORT_ID_KEY = 'f'
    assign articleCard = ''
    assign theme_settings = shop.metafields.foxify.theme_settings.value
    if theme_settings != blank
        assign articleCard = theme_settings['articleCard']
    endif
    assign cardStyle = card_style
    assign ratio = image_ratio
    assign showBlog = articleCard.showBlog
    assign showDate = articleCard.showDate
    assign showReadmore = articleCard.showReadmore
    assign showExcerpt = articleCard.showExcerpt
    if ratio == nil or ratio == 'inherit'
        assign ratio = articleCard.imageRatio
    endif
    if ratio == 'adapt'
        assign ratio = article.image.aspect_ratio
    endif

    if ratio == '1:1'
        assign ratio = '1'
    endif
		if text_align == '' or text_align == null or text_align == 'undefined'
				assign text_align = articleCard.textAlign
		endif

    if cardStyle == nil or cardStyle == 'inherit'
        assign cardStyle = articleCard.style
    endif

    assign backgroundColor = ''
    if articleCard.backgroundColor.value != nil or articleCard.backgroundColor.value != blank
        assign backgroundColor = articleCard.backgroundColor.value
    endif

    assign locales = shop.metafields.foxify.locales.value
    assign current_locale = request.locale.iso_code
    assign primary_locale = current_locale
    for locale in shop.published_locales
        if locale.primary
            assign primary_locale = locale.iso_code
            break
        endif
    endfor
    assign translation = locales[current_locale] | default: locales[primary_locale]
    assign default_title = translation.onboarding.blog_title
    assign default_date = 'now' | date: "%b %d, %y"
%}
<div class="{{ SHORT_ID_KEY }}:article-card {{ SHORT_ID_KEY }}:image--hover-effect {{ SHORT_ID_KEY }}:article-card--align-{{ text_align }} {{ SHORT_ID_KEY }}:article-card--style-{{ cardStyle | default: '1' }} {{ SHORT_ID_KEY }}:relative{% if backgroundColor != blank %} {{ SHORT_ID_KEY }}:article-card--has-bg{% endif %}">
  <div class="{{ SHORT_ID_KEY }}:article-card__image {{ SHORT_ID_KEY }}:block {{ SHORT_ID_KEY }}:overflow-hidden {{ SHORT_ID_KEY }}:relative {{ SHORT_ID_KEY }}:card">
      <a href="{{ article.url }}" class="{{ SHORT_ID_KEY }}:full-width-link"><span class="f:visually-hidden">{{ article.title | default: default_title }}</span></a>
      <{{ SHORT_ID_KEY }}-image class="{{ SHORT_ID_KEY }}:image" data-image-loading style="--f-aspect-ratio: {{ ratio | default: 1 }}">
          {% if article.image %}
              <img
              srcset="{%- if article.image.width >= 165 -%}{{ article.image | image_url: width: 165 }} 165w,{%- endif -%}
                  {%- if article.image.width >= 360 -%}{{ article.image | image_url: width: 360 }} 360w,{%- endif -%}
                  {%- if article.image.width >= 533 -%}{{ article.image | image_url: width: 533 }} 533w,{%- endif -%}
                  {%- if article.image.width >= 720 -%}{{ article.image | image_url: width: 720 }} 720w,{%- endif -%}
                  {%- if article.image.width >= 940 -%}{{ article.image | image_url: width: 940 }} 940w,{%- endif -%}
                  {%- if article.image.width >= 1066 -%}{{ article.image | image_url: width: 1066 }} 1066w,{%- endif -%}
                  {%- if article.image.width >= 1500 -%}{{ article.image | image_url: width: 1500 }} 1500w,{%- endif -%}
                  {{ article.image | image_url }} {{ article.image.width }}w"
                  src="{{ article.image | image_url: width: 533 }}"
                  sizes="(min-width: 1200px) 360px, (min-width: 990px) calc((100vw - 130px) / 4), (min-width: 750px) calc((100vw - 120px) / 3), calc((100vw - 35px) / 2)"
                  alt="{{ article.image.alt | default: article.title | escape }}"
                    loading="lazy"
                  class="{{ image_class }}"
                  width="{{ article.image.width }}"
                  height="{{ article.image.height }}"
              >
          {% else %}
              {{ 'image' | placeholder_svg_tag: 'f:placeholder-svg' }}
          {% endif %}
      </{{ SHORT_ID_KEY }}-image>
  </div>
  <div class="{{ SHORT_ID_KEY }}:article-card__info{% if article.image %} {{ SHORT_ID_KEY }}:article-card__info--has-image{% endif %}">
        {% if showBlog or showDate %}
            <div class="{{ SHORT_ID_KEY }}:article-card__meta">
                {% if showDate %}
                    <span class="{{ SHORT_ID_KEY }}:article-card__meta-item {{ SHORT_ID_KEY }}:article-card__date">
                        {{ article.published_at | time_tag: format: 'date' | default: default_date }}
                    </span>
                {% endif %}
                {% if showDate and showBlog %}<span class="{{ SHORT_ID_KEY }}:article-card__meta-sep"></span>{% endif %}
                {% if showBlog %}
                    <a class="{{ SHORT_ID_KEY }}:article-card__meta-item {{ SHORT_ID_KEY }}:article-card__blog" href="{{ blog.url }}">
                        {{ blog.title }}
                    </a>
                {% endif %}
            </div>
        {% endif %}
      <h3 class="{{ SHORT_ID_KEY }}:article-card__title {{ SHORT_ID_KEY }}:gs-card-title">
          <a href="{{ article.url }}" title="{{ article.title }}">{{ article.title | escape | default: default_title }}</a>
      </h3>
      {% if showExcerpt %}
          <div class="{{ SHORT_ID_KEY }}:article-card__excerpt">
              {% if article.excerpt.size > 0 %}
                  {{ article.excerpt | strip_html | truncatewords: 22 }}
              {% else %}
                  {{ article.content | strip_html | truncatewords: 22 }}
              {% endif %}
              {% if onboarding %}
                  {{ translation.onboarding.blog_excerpt }}
              {% endif %}
          </div>
      {% endif %}
      {% if showReadmore %}
          {% assign ariaLabel = translation.blogs.article.read_more_title | replace: '{{ title }}', article.title %}
          <a href="{{ article.url }}" class="{{ SHORT_ID_KEY }}:gs-link-button {{ SHORT_ID_KEY }}:article-card__readmore {{ SHORT_ID_KEY }}:text-normal"
             aria-label="{{ ariaLabel }}">
              {{ translation.blogs.article.read_more }}
          </a>
      {% endif %}
  </div>
</div>
